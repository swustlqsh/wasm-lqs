
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>WebAssembly performance test</title>
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <meta name="apple-touch-fullscreen" content="yes" />
  <meta name="format-detection" content="telephone=no, email=no" />
  <script src="../wasm-load.js"></script>
</head>

<body>
  <h1>WebAssembly performance test</h1>
  <p id='result'>Result: 0</p>
  <script>
   loadWebAssembly('nbody.wasm')
      .then(instance => {
        const start = instance.exports._start
        const run = instance.exports._run
        let beg = performance.now()
        const en1 = start()
        console.log(en1)
        run(200000)
        let end = performance.now() 
        document.getElementById('result').innerHTML = `Call to run nbody cost ${end-beg} ms` 
      })
  </script>
</body>
</html>